<style>
  .avatar-container {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }

  .avatar {
    width: 40px;
    height: 40px;
    background-color: #e5e5e5;
    border-radius: 50%;
    padding: 0;
    margin: 0;
    background-size: cover;
    background-position: center;
    transition: all 0.15s ease;
    border: 2px solid rgba(255, 255, 255, 0);
  }

  .avatar:hover {
    opacity: 0.6;
  }

  .avatar.selected {
    border: 2px solid #003cff;
  }
</style>

<h2>UI Faces</h2>
<h3>Choose your avatar</h3>

<div class="avatar-container"></div>

<button id="insert">Insert selected avatar</button>
<button id="insert">Insert random avatar</button>

<script>
  const avatars = [
    { src: "https://source.unsplash.com/d0peGya6R5Y/w=400" },
    { src: "https://source.unsplash.com/d1UPkiFd04A/w=400" },
    { src: "https://source.unsplash.com/3TLl_97HNJo/w=400" },
    { src: "https://source.unsplash.com/nWdhpUrXxYY/w=400" },
    { src: "https://source.unsplash.com/mJsYfuZV_dA/w=400" },
    { src: "https://source.unsplash.com/LaK153ghdig/w=400" },
    { src: "https://source.unsplash.com/_cvwXhGqG-o/w=400" },
    { src: "https://source.unsplash.com/hh3ViD0r0Rc/w=400" },
    { src: "https://source.unsplash.com/jFAG_ixCrsM/w=400" },
  ];

  let selectedAvatarSrc = null;

  // create all of the avatar buttons
  const avatarContainer = document.querySelector(".avatar-container");
  avatars.forEach((avatar, index) => {
    //create the button based on the avatar image
    const button = document.createElement("a");
    button.classList.add("avatar");
    button.style.backgroundImage = `url(${avatar.src}`;
    button.href = "#";

    // add the avatar button to the avatar container
    avatarContainer.appendChild(button);
  });

  // add click event listeners for each avatar button
  const avatarButtons = document.querySelectorAll(".avatar");
  avatarButtons.forEach((avatarButton) => {
    avatarButton.addEventListener("click", function (event) {
      avatarButtons.forEach((button) => button.classList.remove("selected"));
      avatarButton.classList.add("selected");
      console.log(avatarButton);

      const src = avatarButton.style.backgroundImage.slice(5, -2);
      selectedAvatarSrc = src;

      event.preventDefault();
    });
  });

  document.getElementById("insert").onclick = () => {
    parent.postMessage(
      { pluginMessage: { type: "insert-avatar", selectedAvatarSrc } },
      "*"
    );
  };
</script>
